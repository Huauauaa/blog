{"componentChunkName":"component---src-templates-blog-post-js","path":"/vue-build/","result":{"data":{"site":{"siteMetadata":{"title":"Frontend Blog"}},"markdownRemark":{"id":"b9133632-22e6-59ed-9cce-0f9d5d7980f4","excerpt":"关于 vue 打包的一些方法 懒加载 CDN 一些 CDN 网站 \n\n\n  中添加 externals key 为包名, value 为 cdn 文件中暴露的变量  按需引入 例: element-ui 全部引入 部分引入 使用小体积版本 例: lodash-es 替换 lodash","html":"<p>关于 vue 打包的一些方法</p>\n<h3>懒加载</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">HelloWorld</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../components/HelloWorld.vue'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>CDN</h3>\n<p>一些 <a href=\"https://developer.mozilla.org/zh-CN/docs/Glossary/CDN\">CDN</a> 网站</p>\n<p><a href=\"https://www.jsdelivr.com/\"><img src=\"https://www.jsdelivr.com/img/icon_256x256.png\" height=\"30px\"></a>\n<a href=\"https://www.bootcdn.cn/\"><img src=\"https://www.bootcdn.cn/assets/ico/favicon.ico\" height=\"30px\"></a>\n<a href=\"https://unpkg.com/\"><img src=\"https://unpkg.com/favicon.ico\" height=\"30px\"></a>\n<a href=\"http://www.staticfile.org/\"><img src=\"http://www.staticfile.org/assets/images/logo.png\" height=\"30px\"></a></p>\n<p><code class=\"language-text\">vue.config.js</code> 中添加 <a href=\"https://webpack.js.org/configuration/externals/\">externals</a></p>\n<blockquote>\n<p>key 为包名, value 为 cdn 文件中暴露的变量</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function-variable function\">configureWebpack</span><span class=\"token operator\">:</span> <span class=\"token parameter\">config</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">===</span> <span class=\"token string\">'production'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    config<span class=\"token punctuation\">.</span>externals <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      vue<span class=\"token operator\">:</span> <span class=\"token string\">'Vue'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'vue-router'</span><span class=\"token operator\">:</span> <span class=\"token string\">'VueRouter'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'element-ui'</span><span class=\"token operator\">:</span> <span class=\"token string\">'ELEMENT'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 为开发环境修改配置...</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p><code class=\"language-text\">public/index.html</code></p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n  &lt;% if(process.env.NODE_ENV === 'production') { %>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://cdn.jsdelivr.net/npm/vue@2.6.12<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>prefetch<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n  &lt;% } %>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h3>按需引入</h3>\n<p>例: element-ui</p>\n<p>全部引入</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> ElementUI <span class=\"token keyword\">from</span> <span class=\"token string\">'element-ui'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Vue <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span><span class=\"token punctuation\">;</span>\nVue<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>ElementUI<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>部分引入</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Input<span class=\"token punctuation\">,</span> Button <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'element-ui'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>使用小体积版本</h3>\n<p>例: lodash-es 替换 lodash</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> i lodash-es</code></pre></div>","frontmatter":{"title":"Vue Packaging Optimization","date":"January 03, 2021","description":"something about vue build"}},"previous":{"fields":{"slug":"/hello-world/"},"frontmatter":{"title":"Hello World"}},"next":{"fields":{"slug":"/best-practices/"},"frontmatter":{"title":"Which is Better"}}},"pageContext":{"id":"b9133632-22e6-59ed-9cce-0f9d5d7980f4","previousPostId":"18fc4fe9-0e89-59ce-8872-949d1f306088","nextPostId":"2a7f4342-8be6-5c0b-9085-7f4471279859"}},"staticQueryHashes":["1201842288","2841359383"]}